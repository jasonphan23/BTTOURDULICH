@model IEnumerable<DATABASE.MODELS.DangKi>

@{
    ViewBag.Title = "Quản lý đăng kí";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Quản lý đại lý</h2>



<a href="/KhachHang/Create" class="btnAdd btn btn-success pull-right text-color" data-toggle="modal">Thêm mới</a>

<br />
<br />
<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-primary">
            <div class="panel-heading">
                Danh sách đăng kí
                       
            </div>
            <!-- /.panel-heading -->
            <div class="panel-body">
                <div class="dataTable_wrapper">
                    <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                        <thead>
                            <tr>
                                <th>Tên khách hàng</th>
                                <th>Số điện thoại</th>
                                <th>CMND</th>
                                <th>Tên đoàn</th>
                                <th>Mã đoàn</th>
                                <th>Ngày đăng kí</th>
                                <th>Giá</th>
                           
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @if (Model == null)
                            { 
                                <tr>
                                    <td colspan="8" style="text-align: center;">Không có đại lý nào
                                    </td>
                                </tr>
                            }
                            else
                            {
                                foreach (var item in Model)
                                {
                                <tr>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.KhachHang.HoTen)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.KhachHang.SoDT)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.KhachHang.CMND)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Doan.Ten)
                                    </td>
                                    <td >
                                        @Html.DisplayFor(modelItem => item.Doan.MaDoan)
                                    </td>
                                    <td >

                                        @Html.DisplayFor(modelItem => item.NgayDK)

                                    </td>
                                    <td class="money">
                                        @Html.DisplayFor(modelItem => item.GiaDangKy)
                                    </td>

                                    <td>
                                        <a href="#editModal" class="btnEdit btn btn-warning btn-xs" data-toggle="modal" data-id="@item.MaDK">Sửa</a>
                                    </td>
                                    <td>
                                        @Html.ActionLink("Chi tiết", "Detail", new { id = item.MaDK }, new { @class = "btn btn-primary btn-xs" })

                                    </td>
                                    <td id="row_@item.MaDK">

                                        <a href="#delModal" class="btnDelete btn btn-danger btn-xs" data-toggle="modal" data-id="@item.MaDK
">Xóa</a>
                                    </td>

                                </tr>
                                }
                            }
                        </tbody>
                    </table>
                </div>
                <!-- /.table-responsive -->

            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
    </div>
    <!-- /.col-lg-12 -->
</div>

<div class="modal fade" id="editModal" role="dialog">
    <div class="modal-dialog" id="modal-content">
    </div>
</div>

<div class="modal fade" id="delModal" role="dialog">
    <div class="modal-dialog" id="modal_delete">
    </div>
</div>


@section Scripts
{


    <script>
        
        $(document).on("click", ".btnEdit", function () {
            $("#modal-content").load("/KhachHang/Edit/" + $(this).data("id"));
        });
        $(document).on("click", ".btnDelete", function () {
            $("#modal_delete").load("/KhachHang/Delete/" + $(this).data("id"));
        });

    </script>

}
